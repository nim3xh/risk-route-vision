# Risk Prediction Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    USER                                          â”‚
â”‚                                     â”‚                                            â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                         â”‚                       â”‚                               â”‚
â”‚                    LIVE MODE               MANUAL MODE                           â”‚
â”‚                   (Automatic)            (User Control)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                       â”‚
                          â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FRONTEND (React + TypeScript)                         â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  WeatherPanel     â”‚         â”‚           useRiskStore                   â”‚    â”‚
â”‚  â”‚                   â”‚         â”‚                                          â”‚    â”‚
â”‚  â”‚  [Live] [Manual]  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â€¢ weather (manual values)               â”‚    â”‚
â”‚  â”‚                   â”‚         â”‚  â€¢ liveWeather (API data)                â”‚    â”‚
â”‚  â”‚  Temp: [====]     â”‚         â”‚  â€¢ weatherMode: "manual" | "live"        â”‚    â”‚
â”‚  â”‚  Humidity: [===]  â”‚         â”‚  â€¢ getActiveWeather() â†’ returns correct  â”‚    â”‚
â”‚  â”‚  Wind: [==]       â”‚         â”‚                                          â”‚    â”‚
â”‚  â”‚  Wet: [x]         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚                               â”‚
â”‚                                                 â”‚                               â”‚
â”‚                                                 â–¼                               â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚                                    â”‚  riskApi.score()    â”‚                      â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                 â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚         HTTP POST Request                  â”‚
                          â”‚   /api/v1/risk/score                       â”‚
                          â–¼                                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND (FastAPI + Python)                               â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                  API Router: risk.py                                   â”‚    â”‚
â”‚  â”‚                 POST /api/v1/risk/score                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                     â”‚                                           â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚                                            â”‚                     â”‚
â”‚              â–¼                                            â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   req.weather exists?   â”‚              â”‚   req.weather is None?     â”‚       â”‚
â”‚  â”‚                         â”‚              â”‚                            â”‚       â”‚
â”‚  â”‚   YES â†’ MANUAL MODE     â”‚              â”‚   YES â†’ LIVE MODE          â”‚       â”‚
â”‚  â”‚                         â”‚              â”‚                            â”‚       â”‚
â”‚  â”‚  weather = {            â”‚              â”‚  weather = await           â”‚       â”‚
â”‚  â”‚    temperature: XX,     â”‚              â”‚    snapshot_for_polyline() â”‚       â”‚
â”‚  â”‚    humidity: XX,        â”‚              â”‚                            â”‚       â”‚
â”‚  â”‚    precipitation: XX,   â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚  â”‚    wind_speed: XX,      â”‚              â”‚  â”‚ weather_adapter.py   â”‚  â”‚       â”‚
â”‚  â”‚    is_wet: X            â”‚              â”‚  â”‚                      â”‚  â”‚       â”‚
â”‚  â”‚  }                      â”‚              â”‚  â”‚ Open-Meteo API Call  â”‚  â”‚       â”‚
â”‚  â”‚                         â”‚              â”‚  â”‚ GET /v1/forecast     â”‚  â”‚       â”‚
â”‚  â”‚  print("Using MANUAL")  â”‚              â”‚  â”‚                      â”‚  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚ Returns:             â”‚  â”‚       â”‚
â”‚              â”‚                             â”‚  â”‚ â€¢ temperature        â”‚  â”‚       â”‚
â”‚              â”‚                             â”‚  â”‚ â€¢ humidity           â”‚  â”‚       â”‚
â”‚              â”‚                             â”‚  â”‚ â€¢ precipitation      â”‚  â”‚       â”‚
â”‚              â”‚                             â”‚  â”‚ â€¢ wind_speed         â”‚  â”‚       â”‚
â”‚              â”‚                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚              â”‚                             â”‚                            â”‚       â”‚
â”‚              â”‚                             â”‚  print("Using LIVE")       â”‚       â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                     â”‚                           â”‚
â”‚                                                     â–¼                           â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                         â”‚    feature_engineering.py                  â”‚          â”‚
â”‚                         â”‚                                            â”‚          â”‚
â”‚                         â”‚  build_features(coords, weather, vehicle)  â”‚          â”‚
â”‚                         â”‚                                            â”‚          â”‚
â”‚                         â”‚  â€¢ Calculate curvature from coords         â”‚          â”‚
â”‚                         â”‚  â€¢ Extract time features (hour, dow)       â”‚          â”‚
â”‚                         â”‚  â€¢ Normalize weather values                â”‚          â”‚
â”‚                         â”‚  â€¢ Apply vehicle factors                   â”‚          â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                     â”‚                           â”‚
â”‚                                                     â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          ML MODEL PIPELINE (model.py)                    â”‚  â”‚
â”‚  â”‚                                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚  1. XGBoost Model  â”‚â”€â”€â”€â–¶â”‚ 2. Cause         â”‚â”€â”€â”€â–¶â”‚ 3. Segment GBR  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     (Risk Score)   â”‚    â”‚    Classifier    â”‚    â”‚    (Inc. Rate)  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                    â”‚    â”‚    (Top Cause)   â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Input: Features   â”‚    â”‚                  â”‚    â”‚  Input: hour,   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ temperature     â”‚    â”‚  Input: SPI +    â”‚    â”‚         dow,    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ humidity        â”‚    â”‚         features â”‚    â”‚         is_wet, â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ precipitation   â”‚    â”‚                  â”‚    â”‚         vehicle â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ wind_speed      â”‚    â”‚  Output: Cause   â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ is_wet          â”‚    â”‚  â€¢ "Over Speed"  â”‚    â”‚  Output: Rate   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ hour            â”‚    â”‚  â€¢ "Attention"   â”‚    â”‚  â€¢ 0.042/seg    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ curvature       â”‚    â”‚  â€¢ "Over Taking" â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ vehicle_type    â”‚    â”‚                  â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚                    â”‚    â”‚                  â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  Output: Risk      â”‚    â”‚                  â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ 0.0 to 1.0      â”‚    â”‚                  â”‚    â”‚                 â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                     â”‚                           â”‚
â”‚                                                     â–¼                           â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                         â”‚           Response Assembly                â”‚          â”‚
â”‚                         â”‚                                            â”‚          â”‚
â”‚                         â”‚  {                                         â”‚          â”‚
â”‚                         â”‚    "overall": 0.65,                        â”‚          â”‚
â”‚                         â”‚    "segmentScores": [0.62, 0.68, ...],     â”‚          â”‚
â”‚                         â”‚    "segmentCauses": ["Over Speed", ...],   â”‚          â”‚
â”‚                         â”‚    "rateScores": [0.042, ...],             â”‚          â”‚
â”‚                         â”‚    "explain": { ... },                     â”‚          â”‚
â”‚                         â”‚    "confidence": { ... },                  â”‚          â”‚
â”‚                         â”‚    "weather": {                            â”‚          â”‚
â”‚                         â”‚      temperature: XX,  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ Shows  â”‚
â”‚                         â”‚      humidity: XX,                         â”‚   which â”‚
â”‚                         â”‚      ...               â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€ source â”‚
â”‚                         â”‚    }                                       â”‚   was   â”‚
â”‚                         â”‚  }                                         â”‚   used  â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                     â”‚
                                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  FRONTEND                                        â”‚
â”‚                                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         Display Results                                â”‚    â”‚
â”‚  â”‚                                                                        â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚   RiskBanner     â”‚    â”‚  Route Map      â”‚    â”‚  Explanation    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚    â”‚                 â”‚    â”‚                 â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Risk: 65/100   â”‚    â”‚  ğŸ”´ High risk   â”‚    â”‚  Factors:       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  ğŸ”´ HIGH         â”‚    â”‚  ğŸŸ¡ Medium risk â”‚    â”‚  â€¢ Curvature    â”‚  â”‚    â”‚
â”‚  â”‚  â”‚  Over Speed     â”‚    â”‚  ğŸŸ¢ Low risk    â”‚    â”‚  â€¢ Wetness      â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                  â”‚    â”‚                 â”‚    â”‚  â€¢ Wind         â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              KEY DECISION POINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. WEATHER SOURCE SELECTION
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ req.weather exists? â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
      YES           NO
       â”‚             â”‚
       â–¼             â–¼
   MANUAL MODE   LIVE MODE
   User values   API fetch
   Faster        More accurate
   ~200-400ms    ~500-800ms

2. TIME HANDLING
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  req.hour exists?   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
      YES           NO
       â”‚             â”‚
       â–¼             â–¼
   Manual hour   Current time
   User control  Real-time
   0-23         System clock

3. RISK CALCULATION
   Weather + Time + Location + Vehicle
              â–¼
   Feature Engineering
              â–¼
   XGBoost (Base Risk)
              â–¼
   Threshold Application
              â–¼
   Normalized Score (0-1)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              DATA FLOW EXAMPLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Example 1: LIVE MODE
User â†’ "Predict risk for my current location"
     â†’ Frontend: Gets GPS, no weather input
     â†’ Backend: Sees no weather, calls Open-Meteo
     â†’ Open-Meteo: Returns temp=28Â°C, humid=75%, precip=0mm, wind=12km/h
     â†’ ML Models: Process with live weather + current time (hour=14)
     â†’ Response: Risk=0.35 (35%) with live weather metadata

Example 2: MANUAL MODE
User â†’ Adjusts sliders: temp=32Â°C, humid=90%, precip=8mm, wet=YES, hour=18
     â†’ Frontend: Sends weather object with coordinates
     â†’ Backend: Sees weather, uses provided values
     â†’ ML Models: Process with manual weather + manual time (hour=18)
     â†’ Response: Risk=0.72 (72%) with manual weather metadata

Example 3: HYBRID MODE
User â†’ "Predict risk for 7 AM tomorrow at this location"
     â†’ Frontend: Sets hour=7, no weather input
     â†’ Backend: Uses hour=7, calls Open-Meteo for weather
     â†’ ML Models: Process with live weather + manual time (hour=7)
     â†’ Response: Risk=0.58 (58%) showing rush hour impact


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                           SUPPORTED COMBINATIONS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Live Weather + Current Time     (Default, real-time)
âœ… Manual Weather + Manual Time     (Full control, scenarios)
âœ… Manual Weather + Current Time    (Custom weather, real-time)
âœ… Live Weather + Manual Time       (Real weather, time simulation)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
